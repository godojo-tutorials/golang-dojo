---
/**
 * BookTabs - Компонент табов для переключения между книгами серии
 * Показывает только активные книги (MVP подход)
 */

import { t, type Lang } from '@/utils/i18n';

interface Props {
  lang?: Lang;
}

const { lang = 'ru' } = Astro.props;
const labels = t(lang).books;

// Все книги серии (для будущего roadmap)
const allBooks = [
  {
    id: 'go-language',
    title: labels.goLanguage,
    fullTitle: labels.goLanguageFull,
    active: true,
    lessons: 132,
  },
  {
    id: 'postgresql-go',
    title: 'PostgreSQL + Go',
    fullTitle: 'PostgreSQL + Go',
    active: false,
  },
  {
    id: 'architecture',
    title: labels.architecture,
    fullTitle: 'Architecture Patterns',
    active: false,
  },
  {
    id: 'distributed',
    title: labels.distributed,
    fullTitle: 'Distributed Systems',
    active: false,
  },
  {
    id: 'devops',
    title: 'DevOps',
    fullTitle: 'Infrastructure & DevOps',
    active: false,
  },
];

// Показываем только активные книги + превью следующей
const activeBooks = allBooks.filter(b => b.active);
const nextBook = allBooks.find(b => !b.active);
---

{activeBooks.length > 0 && (
  <div class="book-tabs">
    {activeBooks.map((book) => (
      <button
        class="book-tab active"
        title={book.fullTitle}
      >
        <span class="book-tab-title">{book.title}</span>
      </button>
    ))}
    {nextBook && (
      <button
        class="book-tab disabled"
        disabled
        title={nextBook.fullTitle}
      >
        <span class="book-tab-title">{nextBook.title}</span>
        <span class="book-tab-badge">{labels.comingSoon}</span>
      </button>
    )}
  </div>
)}
